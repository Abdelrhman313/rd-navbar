
/**
 * @module       RD Navbar
 * @author       Evgeniy Gusarov
 * @see          https://ua.linkedin.com/pub/evgeniy-gusarov/8a/a40/54a
 * @version      2.1.7
 */
(function(){var t;t="ontouchstart"in window,function(e,o,n){var s;return s=function(){function s(t,s){this.options=e.extend(!1,{},this.Defaults,s),this.$element=e(t),this.$clone=null,this.$win=e(n),this.$doc=e(o),this.currentLayout=this.options.layout,this.loaded=!1,this.focusOnHover=this.options.focusOnHover,this.focusTimer=!1,this.cloneTimer=!1,this.isStuck=!1,this.initialize()}return s.prototype.Defaults={layout:"rd-navbar-static",deviceLayout:"rd-navbar-fixed",focusOnHover:!0,focusOnHoverTimeout:800,linkedElements:["html"],domAppend:!0,stickUp:!0,stickUpClone:!0,stickUpOffset:"100%",anchorNavSpeed:400,anchorNavOffset:0,anchorNavEasing:"swing",autoHeight:!0,responsive:{0:{layout:"rd-navbar-fixed",deviceLayout:"rd-navbar-fixed",focusOnHover:!1,stickUp:!1},992:{layout:"rd-navbar-static",deviceLayout:"rd-navbar-static",focusOnHover:!0,stickUp:!0}},callbacks:{onToggleSwitch:!1,onToggleClose:!1,onDomAppend:!1,onDropdownOver:!1,onDropdownOut:!1,onDropdownToggle:!1,onDropdownClose:!1,onStuck:!1,onUnstuck:!1,onAnchorChange:!1}},s.prototype.initialize=function(){var e;return e=this,e.$element.addClass("rd-navbar").addClass(e.options.layout),t&&e.$element.addClass("rd-navbar--is-touch"),e.setDataAPI(e),e.options.domAppend&&e.createNav(e),e.options.stickUpClone&&e.createClone(e),e.$element.addClass("rd-navbar-original"),e.applyHandlers(e),e.offset=e.$element.offset().top,e.height=e.$element.outerHeight(),e.loaded=!0,e},s.prototype.resize=function(o,n){var s,a;return a=t?o.getOption("deviceLayout"):o.getOption("layout"),s=o.$element.add(o.$clone),a===o.currentLayout&&o.loaded||(o.switchClass(s,o.currentLayout,a),null!=o.options.linkedElements&&e.grep(o.options.linkedElements,function(t,e){return o.switchClass(t,o.currentLayout+"-linked",a+"-linked")}),o.currentLayout=a),o.focusOnHover=o.getOption("focusOnHover"),o},s.prototype.stickUp=function(t,o){var n,s,a,r,i;return s=t.getOption("stickUp"),n=t.$doc.scrollTop(),r=null!=t.$clone?t.$clone:t.$element,a=t.getOption("stickUpOffset"),i="string"==typeof a?a.indexOf("%")>0?parseFloat(a)*t.height/100:parseFloat(a):a,s?(n>=i&&!t.isStuck||i>n&&t.isStuck)&&(t.$element.add(t.$clone).find("[data-rd-navbar-toggle]").each(function(){e.proxy(t.closeToggle,this)(t,!1)}).end().find(".rd-navbar-submenu").removeClass("opened").removeClass("focus"),n>=i&&!t.isStuck?("resize"===o.type?t.switchClass(r,"","rd-navbar--is-stuck"):r.addClass("rd-navbar--is-stuck"),t.isStuck=!0,t.options.callbacks.onStuck&&t.options.callbacks.onStuck.call(t)):("resize"===o.type?t.switchClass(r,"rd-navbar--is-stuck",""):r.removeClass("rd-navbar--is-stuck").one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",e.proxy(t.resizeWrap,t,o)),t.isStuck=!1,t.options.callbacks.onUnstuck&&t.options.callbacks.onUnstuck.call(t))):t.isStuck&&(t.switchClass(r,"rd-navbar--is-stuck",""),t.isStuck=!1,t.resizeWrap(o)),t},s.prototype.resizeWrap=function(t){var e,o;return o=this,null!=o.$clone||o.isStuck?void 0:(e=o.$element.parent(),o.getOption("autoHeight")?(o.height=o.$element.outerHeight(),"resize"===t.type?(e.addClass("rd-navbar--no-transition").css("height",o.height),e[0].offsetHeight,e.removeClass("rd-navbar--no-transition")):e.css("height",o.height)):void e.css("height","auto"))},s.prototype.createNav=function(t){return t.$element.find(".rd-navbar-dropdown, .rd-navbar-megamenu").each(function(){var t,o;return t=e(this),o=this.getBoundingClientRect(),o.left+t.outerWidth()>=n.innerWidth-10?this.className+=" rd-navbar-open-left":o.left-t.outerWidth()<=10&&(this.className+=" rd-navbar-open-right"),t.hasClass("rd-navbar-megamenu")?t.parent().addClass("rd-navbar--has-megamenu"):t.parent().addClass("rd-navbar--has-dropdown")}).parents("li").addClass("rd-navbar-submenu").append(e("<span/>",{"class":"rd-navbar-submenu-toggle"})),t.options.callbacks.onDomAppend&&t.options.callbacks.onDomAppend.call(this),t},s.prototype.createClone=function(t){return t.$clone=t.$element.clone().insertAfter(t.$element).addClass("rd-navbar--is-clone"),e(".rd-navbar--is-clone").find("[data-rd-navbar-toggle]").each(function(){var t;return e(this).addClass("toggle-cloned"),t=this.getAttribute("data-rd-navbar-toggle"),e(this).parents("body").find(".rd-navbar--is-clone").find(t).addClass("toggle-cloned-elements")}),t},s.prototype.closeToggle=function(t,o){var n,s,a,r;return s=e(o.target),a=!1,o.target!==this&&!s.parents("[data-rd-navbar-toggle]").length&&(r=this.getAttribute("data-rd-navbar-toggle"))&&(n=e(this).parents("body").find(r).add(e(this).parents(".rd-navbar")[0]),n.each(function(){return a?void 0:a=(o.target===this||e.contains(this,o.target))===!0}),a||(n.add(this).removeClass("active"),t.options.callbacks.onToggleClose&&t.options.callbacks.onToggleClose.call(this,t))),this},s.prototype.switchToggle=function(t,o){var n;return o.preventDefault(),e(this).hasClass("toggle-cloned")?(n=this.getAttribute("data-rd-navbar-toggle"))&&(e(".rd-navbar--is-clone [data-rd-navbar-toggle]").not(this).each(function(){var t;return(t=this.getAttribute("data-rd-navbar-toggle"))?e(this).parents("body").find(t+".toggle-cloned-elements").add(this).add(e.inArray(".rd-navbar",t.split(/\s*,\s*/i))>-1?e(this).parents("body")[0]:!1).removeClass("active"):void 0}),e(this).parents("body").find(n+".toggle-cloned-elements").add(this).add(e.inArray(".rd-navbar",n.split(/\s*,\s*/i))>-1?e(this).parents(".rd-navbar")[0]:!1).toggleClass("active")):(n=this.getAttribute("data-rd-navbar-toggle"))&&(e(".rd-navbar-original [data-rd-navbar-toggle]").not(this).each(function(){var t;return(t=this.getAttribute("data-rd-navbar-toggle"))?e(this).parents("body").find(t).not(".toggle-cloned-elements").add(this).add(e.inArray(".rd-navbar",t.split(/\s*,\s*/i))>-1?e(this).parents("body")[0]:!1).removeClass("active"):void 0}),e(this).parents("body").find(n).not(".toggle-cloned-elements").add(this).add(e.inArray(".rd-navbar",n.split(/\s*,\s*/i))>-1?e(this).parents(".rd-navbar")[0]:!1).toggleClass("active")),t.options.callbacks.onToggleSwitch&&t.options.callbacks.onToggleSwitch.call(this,t),this},s.prototype.dropdownOver=function(t,o){var n;return t.focusOnHover&&(n=e(this),clearTimeout(o),n.addClass("focus").siblings().removeClass("opened").each(t.dropdownUnfocus),t.options.callbacks.onDropdownOver&&t.options.callbacks.onDropdownOver.call(this,t)),this},s.prototype.dropdownTouch=function(t,o){var n,s;if(n=e(this),clearTimeout(o),t.focusOnHover){if(s=!1,n.hasClass("focus")&&(s=!0),!s)return n.addClass("focus").siblings().removeClass("opened").each(t.dropdownUnfocus),!1;t.options.callbacks.onDropdownOver&&t.options.callbacks.onDropdownOver.call(this,t)}return this},s.prototype.dropdownOut=function(t,o){var n;return t.focusOnHover&&(n=e(this),n.one("mouseenter.navbar",function(){return clearTimeout(o)}),clearTimeout(o),o=setTimeout(e.proxy(t.dropdownUnfocus,this,t),t.options.focusOnHoverTimeout),t.options.callbacks.onDropdownOut&&t.options.callbacks.onDropdownOut.call(this,t)),this},s.prototype.dropdownUnfocus=function(t){var o;return o=e(this),o.find("li.focus").add(this).removeClass("focus"),this},s.prototype.dropdownClose=function(t,o){var n;return o.target===this||e(o.target).parents(".rd-navbar-submenu").length||(n=e(this),n.find("li.focus").add(this).removeClass("focus").removeClass("opened"),t.options.callbacks.onDropdownClose&&t.options.callbacks.onDropdownClose.call(this,t)),this},s.prototype.dropdownToggle=function(t){return e(this).toggleClass("opened").siblings().removeClass("opened"),t.options.callbacks.onDropdownToggle&&t.options.callbacks.onDropdownToggle.call(this,t),this},s.prototype.goToAnchor=function(t,o){var n,s;return s=this.hash,n=e(s),n.length&&(o.preventDefault(),e("html, body").stop().animate({scrollTop:n.offset().top+t.getOption("anchorNavOffset")+1},t.getOption("anchorNavSpeed"),t.getOption("anchorNavEasing"),function(){return t.changeAnchor(s)})),this},s.prototype.activateAnchor=function(t){var o,n,s,a,r,i,l,d,c,p,h,u;if(a=this,h=a.$doc.scrollTop(),u=a.$win.height(),r=a.$doc.height(),p=a.getOption("anchorNavOffset"),h+u>r-50)return o=e('[data-type="anchor"]').last(),o.length&&o.offset().top>=h&&(i="#"+o.attr("id"),n=e('.rd-navbar-nav a[href^="'+i+'"]').parent(),n.hasClass("active")||(n.addClass("active").siblings().removeClass("active"),a.options.callbacks.onAnchorChange&&a.options.callbacks.onAnchorChange.call(o[0],a))),o;c=e('.rd-navbar-nav a[href^="#"]').get();for(l in c)d=c[l],s=e(d),i=s.attr("href"),o=e(i),o.length&&o.offset().top+p<=h&&o.offset().top+o.outerHeight()>h&&(s.parent().addClass("active").siblings().removeClass("active"),a.options.callbacks.onAnchorChange&&a.options.callbacks.onAnchorChange.call(o[0],a));return null},s.prototype.getAnchor=function(){return history&&history.state?history.state.id:null},s.prototype.changeAnchor=function(t){return history&&(history.state&&history.state.id!==t?history.replaceState({anchorId:t},null,t):history.pushState({anchorId:t},null,t)),this},s.prototype.applyHandlers=function(t){return null!=t.options.responsive&&t.$win.on("resize.navbar",e.proxy(t.resize,t.$win[0],t)).on("resize.navbar",e.proxy(t.resizeWrap,t)).on("resize.navbar",e.proxy(t.stickUp,null!=t.$clone?t.$clone:t.$element,t)).on("orientationchange.navbar",e.proxy(t.resize,t.$win[0],t)).trigger("resize.navbar"),t.$doc.on("scroll.navbar",e.proxy(t.stickUp,null!=t.$clone?t.$clone:t.$element,t)).on("scroll.navbar",e.proxy(t.activateAnchor,t)),t.$element.add(t.$clone).find("[data-rd-navbar-toggle]").each(function(){var o;return o=e(this),o.on("click",e.proxy(t.switchToggle,this,t)),o.parents("body").on("click",e.proxy(t.closeToggle,this,t))}),t.$element.add(t.$clone).find(".rd-navbar-submenu").each(function(){var o,n;return o=e(this),n=o.parents(".rd-navbar--is-clone").length?t.cloneTimer:t.focusTimer,o.on("mouseleave.navbar",e.proxy(t.dropdownOut,this,t,n)),o.find("> a").on("mouseenter.navbar",e.proxy(t.dropdownOver,this,t,n)),o.find("> a").on("touchstart.navbar",e.proxy(t.dropdownTouch,this,t,n)),o.find("> .rd-navbar-submenu-toggle").on("click",e.proxy(t.dropdownToggle,this,t)),o.parents("body").on("click",e.proxy(t.dropdownClose,this,t))}),t.$element.add(t.$clone).find('.rd-navbar-nav a[href^="#"]').each(function(){return e(this).on("click",e.proxy(t.goToAnchor,this,t))}),t},s.prototype.switchClass=function(t,o,n){var s;return s=t instanceof jQuery?t:e(t),s.addClass("rd-navbar--no-transition").removeClass(o).addClass(n),s[0].offsetHeight,s.removeClass("rd-navbar--no-transition")},s.prototype.setDataAPI=function(t){var e,o,n,s,a,r;for(e=["-","-xs-","-sm-","-md-","-lg-"],r=[0,480,768,992,1200],o=n=0,s=r.length;s>n;o=++n)a=r[o],this.$element.attr("data"+e[o]+"layout")&&(this.options.responsive[r[o]]||(this.options.responsive[r[o]]={}),this.options.responsive[r[o]].layout=this.$element.attr("data"+e[o]+"layout")),this.$element.attr("data"+e[o]+"device-layout")&&(this.options.responsive[r[o]]||(this.options.responsive[r[o]]={}),this.options.responsive[r[o]].deviceLayout=this.$element.attr("data"+e[o]+"device-layout")),this.$element.attr("data"+e[o]+"hover-on")&&(this.options.responsive[r[o]]||(this.options.responsive[r[o]]={}),this.options.responsive[r[o]].focusOnHover="true"===this.$element.attr("data"+e[o]+"hover-on")),this.$element.attr("data"+e[o]+"stick-up")&&(this.options.responsive[r[o]]||(this.options.responsive[r[o]]={}),this.options.responsive[r[o]].stickUp="true"===this.$element.attr("data"+e[o]+"stick-up")),this.$element.attr("data"+e[o]+"auto-height")&&(this.options.responsive[r[o]]||(this.options.responsive[r[o]]={}),this.options.responsive[r[o]].autoHeight="true"===this.$element.attr("data"+e[o]+"auto-height")),this.$element.attr("data"+e[o]+"stick-up-offset")&&(this.options.responsive[r[o]]||(this.options.responsive[r[o]]={}),this.options.responsive[r[o]].stickUpOffset=this.$element.attr("data"+e[o]+"stick-up-offset"))},s.prototype.getOption=function(t){var e,o;for(e in this.options.responsive)e<=n.innerWidth&&(o=e);return null!=this.options.responsive&&null!=this.options.responsive[o][t]?this.options.responsive[o][t]:this.options[t]},s}(),e.fn.extend({RDNavbar:function(t){var o;return o=e(this),o.data("RDNavbar")?void 0:o.data("RDNavbar",new s(this,t))}}),n.RDNavbar=s}(window.jQuery,document,window),"undefined"!=typeof module&&null!==module?module.exports=window.RDNavbar:"function"==typeof define&&define.amd&&define(["jquery"],function(){"use strict";return window.RDNavbar})}).call(this);